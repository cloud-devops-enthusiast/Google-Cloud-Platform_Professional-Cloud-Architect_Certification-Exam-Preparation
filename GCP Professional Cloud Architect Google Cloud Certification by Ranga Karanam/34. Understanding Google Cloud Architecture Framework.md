**Getting Started with Google Cloud Architecture Framework**

- These are the best practices and implementation recommendations to help you design your Google Cloud deployment
- First Step: Focus on designing robust, secure and scalable systems
- 4 Principles:
  - Operational excellence
  - Security, Privacy, and Compliance
  - Reliability
  - Performance and Cost Optimization


*Principle 1: Operational Excellance*

- "Efficiently running, managing and monitoring systems that deliver business value"
- Strategies:
  - Automate build, test and deploy
  - Monitor business objectives metrics
  - Conduct disaster recovery testing
- *Best Practices*
  - Increase software development and release velocity
    - Release Engineering
      - Frequent Small releases
    - Automation
      - Static code analysis and security scans
      - Automate Testing (Unit, Integration, System, Load, Security Testing etc ...)
      - Automate build and release pipeline
        - A/B or Canary testing
    - Services:
      - Cloud Source Repositories: Fully Featured, private Git repository
        - Similar to Github
      - Container Registry: Store your docker images
      - Cloud Build: Build deployable artifacts (jars or docker images) from your source code and configuration
  - Monitor System health and business health
    - Understand four golden signals
      - Latency - How fast are you responding to your users?
      - Traffic - How does the load on your system look?
      - Errors - Are any request failing?
      - Saturation - What's the utilization levels of your resources?
    - Logging: Use cloud logging and export to Cloud Storage, BigQuery and Pub/Sub depending on your needs.
    - Metrics: Define and capture metrics SLIs, SLOs etc
    - Monitoring: Cloud Monitoring can aggregate metrics, logs and events
      - Define alerts and custom metrics to identify problems and resolve them quickly
      - You can create visual dashboards as well
      - Generate actionable alerts
    - Key Services:
      - Cloud Monitoring, Cloud Logging, Cloud Debugger, Error Reporting, Cloud Trace and Cloud Profiler.
    - Design for Disaster Recovery:
      - Create well-defined disaster recovery (DR) plan
        - Define recovery time objective (RTO) and recovery point objective (RPO)
        - Consider everything in your DR plan: Applications (compute etc), Data (databases etc), Network Infrastructure, Bandwidth, Facilities
        - Use features provided by Google Cloud:
          - Use Global network to build redundancy
          - Managed services make Scalability easy
      - Regularly test your DR plan
      - Example features you can make use of:
        - Schedule Persistent Disk snapshots for your VMs and copy them across regions
        - Enable live migration to keep your VMs running even when there is software or hardware maintenance
        - Use cloud DNS to switch from primary to backup

*Principle 2: Security, Privacy and Compliance*

- Plan your security controls, privacy and meet your compliance needs
- Strategies
  - Implement least privilege with identity and authorization controls
  - Build a layered security approach
  - Automate deployment of sensitive tasks
  - Implement Security Monitoring
- Manage Authentication and Authorization
  - Follow Identityv and Access Management (IAM) Best Practices
    - Grant appropriate roles
    - Understand when to use service accounts
      - Treat each app component as a seperate trust boundary
        - Create separate service account for each component/service with the minimum permissions needed
    - Use organizational policy service (what is allowed in your organization?)
    - Use cloud asset Inventory (Track your inventory)
    - Use cloud audit logs to audit IAM policy changes and service accounts
- Implememt Compute Security Controls
  - Use private IPs as much as possible
  - Create Hardened VM Images (OS + Minimum Software)
  - Use shielded VMs to prevent remote attacks, privilege escalation and malicious insiders
- Secure the network:
  - Use a carefully designed custom VPC (DO not use the default VPC)
  - Isolates workloads into individual projects by creating one VPC per project
  - Control ingress and egress network traffic using firewall rules
  - Run advanced security and traffic inspection tools
  - Use security command center to analyze the security of your infrastructure
  - Use Network Intelligence Center to evaluate your network topology and architecture
- Implement Data security controls:
  - (Default) Google cloud encrypts customer data stored at rest
    - Use Customer managed or customer supplied keys based on your neeeds
  - Use Object versioning in Cloud Storage for sensitive data
    - Use object lifecycle management to reduce costs
    - Achieve compliance with retention policies using Bucket Lock